module.exports = function (api) {
  /** 
   * Кэшировать конфиг на всё время сборки. 
   * Повторные вызовы используют уже вычисленную конфигурацию.
   * Заметно ускоряет сборку, особенно при большом количестве файлов. 
   * В большинстве случаев его стоит оставлять включённым.
   * @see https://babeljs.io/docs/options#apicache
  */
  api.cache(true);
  return {
    presets: [
      [
        "@babel/preset-env",
        {
          /** Целевые среды выполнения, 
           * версия Ecmascript определяется сама 
           * Текущие версии браузеров для Windows XP
           */
          targets: { 
            chrome: "49", 
            firefox: "52", 
            opera: "36", 
            ie: "8" 
          },
          /**
           * Подключает полифиллы для встроенных объектов и методов (Promise, Map, Array.prototype.includes и т.п.):
           * Добавляет импорты только для тех фич, которые реально используются в коде. 
           * Полифиллы подключаются по мере необходимости.
           */
          useBuiltIns: "usage",
          /** Откуда брать полифиллы: из core-js или из @babel/polyfill */
          corejs: { version: "3", proposals: false },
        },
      ],
    ],
  };
};
